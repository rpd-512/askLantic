<?php
require_once "libs.php";
$userData = [];
if (isset(isAuth()[1])) {
    $userData = isAuth()[1];
} else {
    header("Location: index.php");
}?>
<!DOCTYPE html>
<html>
    <head>
        <title>AskLantic || Ask your stuff here</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link href='https://fonts.googleapis.com/css?family=Days One' rel='stylesheet'>
        <link rel="shortcut icon" type="image/png" href="images/favicon.png">
        <link rel="stylesheet" href="css/style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="js/index.js"></script>
    </head>
    <body onload="$('#ldScrn')[0].remove()">
        <div id='ldScrn'>
            <svg width="250" height="250" viewBox="0 0 604 603" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M302 603C468.514 603 603.5 468.014 603.5 301.5C603.5 134.986 468.514 0 302 0C135.486 0 0.5 134.986 0.5 301.5C0.5 468.014 135.486 603 302 603Z" fill="#3F3D56"/>
                <path opacity="0.05" d="M302 550.398C439.462 550.398 550.898 438.962 550.898 301.5C550.898 164.038 439.462 52.6021 302 52.6021C164.537 52.6021 53.1021 164.038 53.1021 301.5C53.1021 438.962 164.537 550.398 302 550.398Z" fill="black"/>
                <path opacity="0.05" d="M302 505.494C414.663 505.494 505.994 414.163 505.994 301.5C505.994 188.837 414.663 97.5064 302 97.5064C189.337 97.5064 98.0064 188.837 98.0064 301.5C98.0064 414.163 189.337 505.494 302 505.494Z" fill="black"/>
                <path opacity="0.05" d="M302 447.76C382.777 447.76 448.26 382.277 448.26 301.5C448.26 220.723 382.777 155.24 302 155.24C221.223 155.24 155.74 220.723 155.74 301.5C155.74 382.277 221.223 447.76 302 447.76Z" fill="black"/>
                <path d="M304.76 533.012C324.159 533.012 339.885 516.958 339.885 497.155C339.885 477.352 324.159 461.299 304.76 461.299C285.36 461.299 269.634 477.352 269.634 497.155C269.634 516.958 285.36 533.012 304.76 533.012Z" fill="#3895BF"/>
                <path d="M300.997 123.003C246.1 123.399 201.151 168.938 200.371 224.973C200.364 225.49 200.36 229.128 200.361 233.886C200.361 240.862 203.076 247.552 207.908 252.485C212.74 257.418 219.294 260.19 226.128 260.19C229.515 260.19 232.87 259.507 235.999 258.183C239.128 256.858 241.971 254.917 244.365 252.471C246.76 250.024 248.658 247.12 249.952 243.924C251.246 240.728 251.911 237.304 251.908 233.845C251.905 230.609 251.904 228.369 251.904 228.231C251.902 219.571 254.109 211.06 258.307 203.534C262.505 196.009 268.55 189.729 275.847 185.311C283.144 180.894 291.442 178.492 299.924 178.341C308.406 178.19 316.781 180.296 324.224 184.451C331.668 188.606 337.923 194.668 342.375 202.04C346.827 209.411 349.323 217.839 349.617 226.494C349.91 235.149 347.992 243.733 344.05 251.401C340.108 259.07 334.278 265.559 327.135 270.23L327.144 270.241C327.144 270.241 290.469 294.342 279.288 327.405L279.297 327.407C277.331 334.181 276.335 341.208 276.339 348.273C276.339 351.177 276.507 376.585 276.83 397.207C276.943 404.323 279.792 411.108 284.762 416.098C289.732 421.089 296.424 423.885 303.396 423.883C306.899 423.883 310.367 423.176 313.602 421.802C316.836 420.429 319.772 418.416 322.241 415.879C324.711 413.343 326.664 410.333 327.99 407.023C329.315 403.713 329.986 400.168 329.965 396.593C329.852 377.706 329.792 355.715 329.792 354.119C329.792 333.817 348.978 313.589 364.737 300.398C382.885 285.209 395.944 264.508 401.19 241.158C402.35 236.351 402.99 231.428 403.098 226.477C403.098 212.826 400.452 199.309 395.312 186.706C390.171 174.103 382.639 162.662 373.148 153.044C363.658 143.426 352.396 135.819 340.013 130.664C327.63 125.508 314.37 122.904 300.997 123.003Z" fill="#3895BF"/>
            </svg>
        </div>
    <div class="homeHead" style="height:120px;">
            <h1 onclick="location.href='index.php'" onmouseover="this.style.cursor='pointer'">AskLantic</h1>
            <p>Notifications</p>
            <?php
            if($userData != []){
                $profPic = $userData["prfpc"];
                if($profPic == ""){$profPic = "images/default.png";}
                else{$profPic = "profile_picture/".$profPic;}
                echo "
                <div class='menu' onmouseover='document.getElementsByClassName(\"menuOptions\")[0].style.display=\"block\"' onmouseout='document.getElementsByClassName(\"menuOptions\")[0].style.display=\"none\"'>
                    <button class='prof'>
                        <img src='".$profPic."' alt='profile picture' onerror='this.src=\"images/default.png\"'>
                    </button>
                    <div class='menuOptions'>
                        <button onclick='location.href=\"profile.php\"'>Profile</button><br>
                        <button onclick='location.href=\"achievements.php\"'>Achievements</button><br>
                        <button onclick='location.href=\"notifications.php\"'>Notification</button><br>
                        <button onclick='lgout()'>Logout</button><br>
                    </div>
                </div>";
            }
            ?>
    </div>
    <div class="notif">
    <?php
        $raw_data = $pdo->query("select * from askLantic__notifications where usrId = '".$userData['userId']."' order by notifId desc");
        $notifExst = false;
        while ($data = $raw_data->fetch(PDO::FETCH_ASSOC))
        {
        $notifExst = true;
        echo '
        <div id="notif'.md5($data['notifId'].'DeleteMe').'">
            <button onclick="dltNotif(\''.md5($data['notifId'].'DeleteMe').'\')"><svg height="10px" viewBox="0 0 329.26933 329" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"/></svg></button>
            <div class="ago">';
        echo str_replace(" ","<br>",convTime(time() - $data['time']));
        echo'</div><div onclick = "location.href = \''.$data['link'].'\'" class="mesg">';

        echo $data['mesg'];

        echo '</div></div>';}
        if(!$notifExst){
            echo "<p style='color:rgb(50,120,150);font-size:25px;transform:translateX(15px);'>No new notifications</p>";
        }
    ?>
    </div>
    <svg width="200" height="300" viewBox="0 0 525 639" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g id="standHead4">
        <path id="Ellipse 5" d="M105.16 163.338C120.774 163.338 133.432 150.68 133.432 135.066C133.432 119.452 120.774 106.794 105.16 106.794C89.5457 106.794 76.8879 119.452 76.8879 135.066C76.8879 150.68 89.5457 163.338 105.16 163.338Z" fill="#FFB9B9"/>
        <path id="Path 26" d="M80.1639 103.171L74.6399 100.96C74.6399 100.96 86.1899 88.244 102.259 89.35L97.7389 84.374C97.7389 84.374 108.787 79.951 118.83 91.561C124.11 97.661 130.218 104.838 134.03 112.919H139.946L137.477 118.355L146.116 123.794L137.246 122.817C138.086 127.511 137.798 132.336 136.407 136.897L136.645 141.197C136.645 141.197 126.364 125.29 126.364 123.079V128.608C126.364 128.608 120.84 123.632 120.84 120.315L117.827 124.185L116.316 118.094L97.7359 124.175L100.749 119.199L89.1989 120.858L93.7189 114.777C93.7189 114.777 80.6629 121.964 80.1599 128.046C79.6569 134.128 73.1299 141.867 73.1299 141.867L70.1169 136.338C70.1169 136.338 65.6009 111.464 80.1639 103.171Z" fill="#2F2E41"/>
        </g>
        <g id="standNotif3">
        <path id="Rectangle 21" d="M524.742 52.462H237.25V109.223H524.742V52.462Z" fill="#E6E6E6"/>
        <path id="Path 65" d="M243.379 103.095H518.614V58.595H243.379V103.095Z" fill="white"/>
        <path id="Path 67" d="M267.473 63.52C270.826 63.52 274.104 64.5144 276.893 66.3775C279.681 68.2405 281.854 70.8885 283.137 73.9866C284.421 77.0847 284.756 80.4938 284.102 83.7828C283.448 87.0717 281.833 90.0928 279.462 92.464C277.091 94.8352 274.07 96.45 270.781 97.1042C267.492 97.7584 264.083 97.4227 260.985 96.1394C257.886 94.8561 255.238 92.6829 253.375 89.8947C251.512 87.1065 250.518 83.8284 250.518 80.475C250.518 75.9783 252.304 71.6657 255.484 68.486C258.664 65.3063 262.976 63.52 267.473 63.52V63.52Z" fill="#6C63FF"/>
        <path id="Rectangle 22" d="M475.352 73.84H308.017V77.526H475.352V73.84Z" fill="#E6E6E6"/>
        <path id="Rectangle 23" d="M475.352 83.423H308.017V87.109H475.352V83.423Z" fill="#E6E6E6"/>
        </g>
        <g id="standNotif2">
        <path id="Rectangle 21_2" d="M524.742 133.462H237.25V190.223H524.742V133.462Z" fill="#E6E6E6"/>
        <path id="Path 65_2" d="M243.379 184.095H518.614V139.595H243.379V184.095Z" fill="white"/>
        <path id="Ellipse 10" d="M267.473 178.43C276.837 178.43 284.428 170.839 284.428 161.475C284.428 152.111 276.837 144.52 267.473 144.52C258.109 144.52 250.518 152.111 250.518 161.475C250.518 170.839 258.109 178.43 267.473 178.43Z" fill="#6C63FF"/>
        <path id="Rectangle 22_2" d="M475.352 154.84H308.017V158.526H475.352V154.84Z" fill="#E6E6E6"/>
        <path id="Rectangle 23_2" d="M475.352 164.423H308.017V168.109H475.352V164.423Z" fill="#E6E6E6"/>
        </g>
        <g id="standNotif1">
        <path id="Rectangle 21_3" d="M524.742 214.462H237.25V271.223H524.742V214.462Z" fill="#E6E6E6"/>
        <path id="Path 65_3" d="M243.379 265.095H518.614V220.595H243.379V265.095Z" fill="white"/>
        <path id="Ellipse 10_2" d="M267.473 259.43C276.837 259.43 284.428 251.839 284.428 242.475C284.428 233.111 276.837 225.52 267.473 225.52C258.109 225.52 250.518 233.111 250.518 242.475C250.518 251.839 258.109 259.43 267.473 259.43Z" fill="#6C63FF"/>
        <path id="Rectangle 22_3" d="M475.352 235.84H308.017V239.526H475.352V235.84Z" fill="#E6E6E6"/>
        <path id="Rectangle 23_3" d="M475.352 245.423H308.017V249.109H475.352V245.423Z" fill="#E6E6E6"/>
        </g>
        <g id="standHead4_2">
        <g id="Group 8">
        <g id="Group 7">
        <path id="Path 16" d="M95.1269 560.401L92.1569 589.114L108.988 587.134L110.968 563.372L95.1269 560.401Z" fill="#FFB9B9"/>
        <path id="Path 17" d="M50.5749 342.582C50.5749 342.582 -35.5631 425.749 18.8919 451.492H35.7229C35.7229 451.492 72.3559 391.092 90.1779 392.087L95.1279 449.512L92.1579 565.352L113.94 566.342C113.94 566.342 126.811 507.927 125.821 475.254L148.593 354.463L50.5749 342.582Z" fill="#2F2E41"/>
        <path id="Path 18" d="M23.8399 447.532L35.7209 451.492C35.7209 451.492 82.2549 440.601 85.2209 441.592L94.4339 441.528L94.1339 417.828H54.5339L23.8399 447.532Z" fill="#2F2E41"/>
        <path id="Path 19" d="M110.968 583.174C110.968 583.174 93.1459 575.253 90.1759 583.174C87.2059 591.095 88.1959 613.867 88.1959 613.867C90.5713 618.434 91.2718 623.688 90.1759 628.718C88.1959 636.639 98.0969 640.599 110.968 636.639C123.839 632.679 123.839 622.778 123.839 622.778L110.968 583.174Z" fill="#2F2E41"/>
        <path id="Path 20" d="M125.819 415.844C125.819 415.844 139.68 407.923 138.69 419.804C137.868 427.651 135.865 435.328 132.749 442.576C132.749 442.576 145.62 476.239 132.749 479.209C119.878 482.179 109.977 475.249 109.977 470.298C109.977 465.347 125.819 415.844 125.819 415.844Z" fill="#2F2E41"/>
        <g id="Group 6">
        <path id="Path 21" d="M82.2549 144.565L84.2359 182.189L101.067 197.038L119.879 170.306V143.575L82.2549 144.565Z" fill="#FFB9B9"/>
        <path id="Path 22" d="M95.1259 182.188L83.7919 173.766L76.3149 185.158L42.6519 204.958L62.4519 256.442L63.4419 306.937C63.4419 306.937 26.8089 344.56 48.5909 349.511C70.3729 354.462 147.6 365.352 151.56 356.442C155.52 347.532 146.61 255.453 146.61 255.453L149.58 177.236L119.88 166.497L95.1259 182.188Z" fill="#6C63FF"/>
        </g>
        <path id="Path 23" d="M34.7308 244.895C34.7308 244.895 26.8098 300.995 41.6618 300.995C50.4819 301.025 59.224 299.344 67.4038 296.045L55.5228 265.352L60.4728 244.56L34.7308 244.895Z" fill="#FFB9B9"/>
        <path id="Path 24" d="M57.5029 294.068L68.3939 296.048C68.3939 296.048 100.077 276.248 102.057 275.256C104.037 274.264 70.3739 257.434 70.3739 257.434L47.6019 266.345L57.5029 294.068Z" fill="#FFB9B9"/>
        <path id="Path 25" opacity="0.1" d="M70.3739 257.434L56.0739 263.029L60.4739 244.563L34.7319 244.894C34.7319 244.894 26.8109 300.994 41.6629 300.994C50.483 301.024 59.2251 299.343 67.4049 296.044L67.3299 295.85L68.3949 296.044C68.3949 296.044 100.078 276.244 102.058 275.252C104.038 274.26 70.3739 257.434 70.3739 257.434Z" fill="black"/>
        <path id="Path 27" d="M129.779 227.732C124.782 233.905 121.994 241.573 121.858 249.514L69.3829 247.534C69.3829 247.534 55.5219 245.554 55.5219 255.455V265.355C55.5219 265.355 62.4529 262.385 66.4129 265.355C70.3729 268.325 112.947 294.068 133.739 284.167C154.531 274.266 159.481 235.653 159.481 235.653C159.481 235.653 140.67 219.811 129.779 227.732Z" fill="#FFB9B9"/>
        <path id="Path 28" d="M141.665 178.227L149.586 177.237C149.586 177.237 165.427 179.217 163.447 209.91C161.467 240.603 160.477 242.583 160.477 242.583C160.477 242.583 139.685 223.771 124.834 232.683L141.665 178.227Z" fill="#6C63FF"/>
        <path id="Path 29" d="M46.6119 204.963H42.6519C37.5209 211.444 34.7297 219.469 34.7309 227.735C34.6401 236.589 33.4766 245.398 31.2659 253.972L62.4539 248.527L46.6119 204.963Z" fill="#6C63FF"/>
        </g>
        <line id="Line 1" x1="195.441" y1="15.258" x2="138.441" y2="624.258" stroke="#327896" stroke-width="27"/>
        <ellipse id="Ellipse 11" cx="195.59" cy="14.3592" rx="13" ry="14.5" transform="rotate(95.35 195.59 14.3592)" fill="#327896"/>
        </g>
        <ellipse id="Ellipse 12" cx="138.649" cy="620.295" rx="13" ry="14.5" transform="rotate(95.35 138.649 620.295)" fill="#327896"/>
        </g>
    </svg>

    <script>timeSpent();</script>
    </body>
</html>

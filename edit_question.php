<?php
require_once "libs.php";
session_start();
$cmnd = "";
$quesData = [];
$askData = [];
$userData = [];
if (isset($_SESSION['cmnd'])) {
    $cmnd = $_SESSION['cmnd'];
    unset($_SESSION['cmnd']);
}
if (isset(isAuth()[1])) {
    $perm = 1;
    $userData = isAuth()[1];
}
else{
    $perm = 0;
}
$qExist = false;
$raw_data = $pdo->query("select * from askLantic__questions where isCmnt is NULL");
while ($data = $raw_data->fetch(PDO::FETCH_ASSOC)){
    if(md5($data['quesId']."QuestionOfFire@314159265") == $_GET['q']){$quesData = $data;$qExist = true;}
}

if(! isset($_GET['q'])){header("Location: index.php");exit();}

elseif(!$qExist){echo '
    <!DOCTYPE html>
<html>
    <head>
        <title>AskLantic || Ask your stuff here</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link href=\'https://fonts.googleapis.com/css?family=Days One\' rel=\'stylesheet\'>
        <link rel="shortcut icon" type="image/png" href="images/favicon.png">
        <link rel="stylesheet" href="css/style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="js/index.js"></script>
    </head>
    <body onload="$(\'#ldScrn\')[0].remove()">
        <div id=\'ldScrn\'>
            <svg width="250" height="250" viewBox="0 0 604 603" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M302 603C468.514 603 603.5 468.014 603.5 301.5C603.5 134.986 468.514 0 302 0C135.486 0 0.5 134.986 0.5 301.5C0.5 468.014 135.486 603 302 603Z" fill="#3F3D56"/>
                <path opacity="0.05" d="M302 550.398C439.462 550.398 550.898 438.962 550.898 301.5C550.898 164.038 439.462 52.6021 302 52.6021C164.537 52.6021 53.1021 164.038 53.1021 301.5C53.1021 438.962 164.537 550.398 302 550.398Z" fill="black"/>
                <path opacity="0.05" d="M302 505.494C414.663 505.494 505.994 414.163 505.994 301.5C505.994 188.837 414.663 97.5064 302 97.5064C189.337 97.5064 98.0064 188.837 98.0064 301.5C98.0064 414.163 189.337 505.494 302 505.494Z" fill="black"/>
                <path opacity="0.05" d="M302 447.76C382.777 447.76 448.26 382.277 448.26 301.5C448.26 220.723 382.777 155.24 302 155.24C221.223 155.24 155.74 220.723 155.74 301.5C155.74 382.277 221.223 447.76 302 447.76Z" fill="black"/>
                <path d="M304.76 533.012C324.159 533.012 339.885 516.958 339.885 497.155C339.885 477.352 324.159 461.299 304.76 461.299C285.36 461.299 269.634 477.352 269.634 497.155C269.634 516.958 285.36 533.012 304.76 533.012Z" fill="#3895BF"/>
                <path d="M300.997 123.003C246.1 123.399 201.151 168.938 200.371 224.973C200.364 225.49 200.36 229.128 200.361 233.886C200.361 240.862 203.076 247.552 207.908 252.485C212.74 257.418 219.294 260.19 226.128 260.19C229.515 260.19 232.87 259.507 235.999 258.183C239.128 256.858 241.971 254.917 244.365 252.471C246.76 250.024 248.658 247.12 249.952 243.924C251.246 240.728 251.911 237.304 251.908 233.845C251.905 230.609 251.904 228.369 251.904 228.231C251.902 219.571 254.109 211.06 258.307 203.534C262.505 196.009 268.55 189.729 275.847 185.311C283.144 180.894 291.442 178.492 299.924 178.341C308.406 178.19 316.781 180.296 324.224 184.451C331.668 188.606 337.923 194.668 342.375 202.04C346.827 209.411 349.323 217.839 349.617 226.494C349.91 235.149 347.992 243.733 344.05 251.401C340.108 259.07 334.278 265.559 327.135 270.23L327.144 270.241C327.144 270.241 290.469 294.342 279.288 327.405L279.297 327.407C277.331 334.181 276.335 341.208 276.339 348.273C276.339 351.177 276.507 376.585 276.83 397.207C276.943 404.323 279.792 411.108 284.762 416.098C289.732 421.089 296.424 423.885 303.396 423.883C306.899 423.883 310.367 423.176 313.602 421.802C316.836 420.429 319.772 418.416 322.241 415.879C324.711 413.343 326.664 410.333 327.99 407.023C329.315 403.713 329.986 400.168 329.965 396.593C329.852 377.706 329.792 355.715 329.792 354.119C329.792 333.817 348.978 313.589 364.737 300.398C382.885 285.209 395.944 264.508 401.19 241.158C402.35 236.351 402.99 231.428 403.098 226.477C403.098 212.826 400.452 199.309 395.312 186.706C390.171 174.103 382.639 162.662 373.148 153.044C363.658 143.426 352.396 135.819 340.013 130.664C327.63 125.508 314.37 122.904 300.997 123.003Z" fill="#3895BF"/>
            </svg>
        </div>
        <div class="homeHead" style="height:60px;">
                <h1 onclick="location.href=\'index.php\'" onmouseover="this.style.cursor=\'pointer\'">AskLantic</h1>
                ';
                if($userData != []){
                $profPic = $userData["prfpc"];
                if($profPic == ""){$profPic = "images/default.png";}
                else{$profPic = "profile_picture/".$profPic;}
                echo "
                <div class='menu' onmouseover='document.getElementsByClassName(\"menuOptions\")[0].style.display=\"block\"' onmouseout='document.getElementsByClassName(\"menuOptions\")[0].style.display=\"none\"'>
                    <button class='prof'>
                        <img src='".$profPic."'  onerror='this.src=\"images/default.png\"'>
                    </button>
                    <div class='menuOptions'>
                        <button onclick='location.href=\"profile.php\"'>Profile</button><br>
                        <button onclick='location.href=\"achievements.php\"'>Achievements</button><br>
                        <button onclick='lgout()'>Logout</button><br>
                    </div>
                </div>";
            }
            echo '
            <p style="color:rgb(50,120,150);">Question doesn\'t exists <br>or has been deleted by the user</p>

            <svg width="300" height="400" viewBox="0 0 928 743" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="undraw_starry_window_ppm0 1" clip-path="url(#clip0)">
            <g id="starStat">
            <g id="Group 6">
            <path id="Vector" d="M484.631 324.745L482.028 327.331L479.442 324.727L477.707 326.451L480.292 329.054L477.689 331.64L479.412 333.375L482.016 330.79L484.601 333.393L486.337 331.669L483.751 329.066L486.354 326.481L484.631 324.745Z" fill="#E6E6E6"/>
            <g id="Group 5">
            <path id="Vector_2" d="M927.76 251.193V444.373H425.38V251.193C425.289 196.828 442.923 143.915 475.61 100.473C497.537 71.232 525.582 47.1291 557.787 29.8469C589.992 12.5647 625.581 2.51966 662.07 0.413097C666.86 0.133097 671.693 -0.00356545 676.57 0.00310122C679.34 0.00310122 682.11 0.0431006 684.85 0.143101C748.585 2.16176 809.148 28.4249 854.18 73.5731C855.54 74.9331 856.87 76.3031 858.21 77.6831C865.093 84.8926 871.544 92.5025 877.53 100.473C910.212 143.917 927.846 196.829 927.76 251.193Z" fill="#3F3D56"/>
            <path id="Vector_3" d="M802.645 243.484C839.202 243.484 868.838 213.849 868.838 177.292C868.838 140.734 839.202 111.099 802.645 111.099C766.088 111.099 736.453 140.734 736.453 177.292C736.453 213.849 766.088 243.484 802.645 243.484Z" fill="#6C63FF"/>
            <path id="Vector_4" opacity="0.2" d="M796.134 139.312C800.33 139.312 803.73 135.911 803.73 131.716C803.73 127.521 800.33 124.12 796.134 124.12C791.939 124.12 788.539 127.521 788.539 131.716C788.539 135.911 791.939 139.312 796.134 139.312Z" fill="black"/>
            <path id="Vector_5" opacity="0.2" d="M809.156 215.271C813.351 215.271 816.752 211.87 816.752 207.675C816.752 203.48 813.351 200.079 809.156 200.079C804.961 200.079 801.56 203.48 801.56 207.675C801.56 211.87 804.961 215.271 809.156 215.271Z" fill="black"/>
            <path id="Vector_6" opacity="0.2" d="M838.454 170.781C841.451 170.781 843.88 168.352 843.88 165.355C843.88 162.359 841.451 159.93 838.454 159.93C835.458 159.93 833.029 162.359 833.029 165.355C833.029 168.352 835.458 170.781 838.454 170.781Z" fill="black"/>
            <path id="Vector_7" opacity="0.2" d="M776.602 200.079C786.191 200.079 793.964 192.306 793.964 182.717C793.964 173.128 786.191 165.355 776.602 165.355C767.013 165.355 759.24 173.128 759.24 182.717C759.24 192.306 767.013 200.079 776.602 200.079Z" fill="black"/>
            <path id="Vector_8" d="M684.853 0.145036V444.371H662.065V0.414293C666.861 0.134666 671.695 -0.0034319 676.567 1.43038e-06C679.343 1.43038e-06 682.108 0.0414162 684.853 0.145036Z" fill="white"/>
            <path id="Vector_9" d="M877.528 100.476H475.605C481.588 92.504 488.039 84.8945 494.924 77.6873H858.21C865.094 84.8945 871.545 92.504 877.528 100.476V100.476Z" fill="white"/>
            <path id="Vector_10" d="M871.619 297.631C874.499 297.631 876.834 295.296 876.834 292.415C876.834 289.535 874.499 287.2 871.619 287.2C868.738 287.2 866.403 289.535 866.403 292.415C866.403 295.296 868.738 297.631 871.619 297.631Z" fill="#E6E6E6"/>
            <path id="Vector_11" d="M534.619 254.631C537.499 254.631 539.834 252.296 539.834 249.415C539.834 246.535 537.499 244.2 534.619 244.2C531.738 244.2 529.403 246.535 529.403 249.415C529.403 252.296 531.738 254.631 534.619 254.631Z" fill="#E6E6E6"/>
            <path id="Vector_12" d="M772.631 272.745L770.028 275.331L767.442 272.727L765.707 274.451L768.292 277.054L765.689 279.64L767.412 281.375L770.016 278.79L772.601 281.393L774.337 279.669L771.751 277.066L774.354 274.481L772.631 272.745Z" fill="#E6E6E6"/>
            <path id="Vector_13" d="M743.631 354.745L741.028 357.331L738.442 354.727L736.707 356.451L739.292 359.054L736.689 361.64L738.412 363.375L741.016 360.79L743.601 363.393L745.337 361.669L742.751 359.066L745.354 356.481L743.631 354.745Z" fill="#E6E6E6"/>
            <path id="Vector_14" d="M567.631 124.745L565.028 127.331L562.442 124.727L560.707 126.451L563.292 129.054L560.689 131.64L562.412 133.375L565.016 130.79L567.601 133.393L569.337 131.669L566.751 129.066L569.354 126.481L567.631 124.745Z" fill="#E6E6E6"/>
            </g>
            </g>
            <g id="Group 4">
            <path id="Vector_15" d="M227.324 249.928L224.793 286.623L256.427 290.419C256.427 290.419 256.427 260.051 258.958 256.255C261.488 252.459 227.324 249.928 227.324 249.928Z" fill="#FFB8B8"/>
            <g id="Group 3">
            <path id="Vector_16" d="M303.245 448.589L299.449 465.039C299.449 465.039 300.714 503 290.592 499.204C280.469 495.408 282.999 462.508 282.999 462.508L291.857 446.059L303.245 448.589Z" fill="#FFB8B8"/>
            <path id="Vector_17" d="M297.478 297.715L256.487 280.399C256.487 280.399 236.9 265.313 225.427 276.489L220.278 283.864C220.278 283.864 174.741 301.619 174.753 315.538L192.529 385.117C192.529 385.117 182.441 424.352 197.627 426.87L279.882 434.39C279.882 434.39 291.258 420.461 281.12 402.755L284.879 360.995L297.478 297.715Z" fill="#327896"/>
            <path id="Vector_18" d="M269.641 299.005L297.478 297.715C297.478 297.715 306.337 300.238 312.685 324.275C319.033 348.311 320.333 387.536 320.333 387.536L305.21 458.409L286.228 455.895L293.76 387.559L281.067 342.017L269.641 299.005Z" fill="#327896"/>
            <path id="Vector_19" d="M189.93 306.667L176.209 310.954C176.209 310.954 164.641 328.2 164.649 337.058C164.657 345.915 159.654 412.984 159.654 412.984L192.601 467.366L202.701 440.784L182.425 406.637L198.838 364.866L189.93 306.667Z" fill="#327896"/>
            <g id="Group 2">
            <path id="Vector_20" d="M283.632 431.507L192.657 423.503C192.657 423.503 183.669 480.856 184.934 503.633C186.199 526.409 187.465 561.839 187.465 561.839L177.342 716.213L216.568 711.152L221.63 583.35L238.079 513.755L257.06 602.331L269.713 716.213L303.878 712.417L292.49 574.493C292.49 574.493 302.613 450.487 283.632 431.507Z" fill="#2F2E41"/>
            <path id="Vector_21" d="M296.286 706.09L307.674 709.886C307.674 709.886 331.716 703.559 325.389 720.009C319.062 736.459 301.347 733.928 301.347 733.928C301.347 733.928 279.836 750.378 270.979 737.724L276.04 711.152L296.286 706.09Z" fill="#2F2E41"/>
            <path id="Vector_22" d="M203.914 706.09L215.303 709.886C215.303 709.886 239.345 703.559 233.018 720.009C226.691 736.459 208.976 733.928 208.976 733.928C208.976 733.928 187.465 750.378 178.607 737.724L183.669 711.152L203.914 706.09Z" fill="#2F2E41"/>
            </g>
            </g>
            </g>
            </g>
            <g id="starHead">
            <path id="Vector_23" d="M246.937 268.276C260.913 268.276 272.244 256.945 272.244 242.968C272.244 228.992 260.913 217.661 246.937 217.661C232.96 217.661 221.63 228.992 221.63 242.968C221.63 256.945 232.96 268.276 246.937 268.276Z" fill="#FFB8B8"/>
            <path id="Vector_24" d="M227.324 265.112C227.324 265.112 200.751 246.132 214.67 223.355C224.326 207.554 244.335 208.805 255.685 211.053C258.743 211.618 261.618 212.917 264.062 214.84C266.506 216.763 268.445 219.251 269.713 222.09C271.611 226.519 271.611 230.948 264.019 230.948C248.835 230.948 256.427 242.336 256.427 242.336C256.427 242.336 246.304 244.866 248.835 253.724C251.365 262.582 227.324 265.112 227.324 265.112Z" fill="#2F2E41"/>
            </g>
            <g id="starShot">
            <path id="Vector_25" opacity="0.8" d="M649.923 324.899L682.893 286.3L715.864 247.701L734.476 225.912C735.506 224.706 733.917 222.826 732.887 224.031L699.917 262.63L666.946 301.228L648.334 323.018C647.304 324.223 648.893 326.104 649.923 324.899V324.899Z" fill="url(#paint0_linear)"/>
            <path id="Vector_26" opacity="0.8" d="M680.923 54.2554L713.893 15.6568L746.864 -22.9417L765.476 -44.7313C766.506 -45.9368 764.917 -47.8177 763.887 -46.6121L730.917 -8.01356L697.946 30.585L679.334 52.3744C678.304 53.58 679.893 55.4609 680.923 54.2553V54.2554Z" fill="url(#paint1_linear)"/>
            </g>
            </g>
            <defs>
            <linearGradient id="paint0_linear" x1="648" y1="274.465" x2="734.81" y2="274.465" gradientUnits="userSpaceOnUse">
            <stop stop-color="white"/>
            <stop offset="1" stop-color="white" stop-opacity="0.3"/>
            </linearGradient>
            <linearGradient id="paint1_linear" x1="63682.4" y1="22047.5" x2="71218.4" y2="22047.5" gradientUnits="userSpaceOnUse">
            <stop stop-color="white"/>
            <stop offset="1" stop-color="white" stop-opacity="0.3"/>
            </linearGradient>
            <clipPath id="clip0">
            <rect width="927.76" height="742.508" fill="white"/>
            </clipPath>
            </defs>
            </svg>

            </body>';exit();}
$raw_data = $pdo->query("select * from askLantic__userData where userId = ".$quesData['usrId']);
while ($data = $raw_data->fetch(PDO::FETCH_ASSOC)){
    $askData = $data;
}


if(isset($_POST['subm'])){
    if(str_replace(" ","",$_POST['desc']) == "" or str_replace(" ","",$_POST['ttle']) == "" or str_replace(" ","",$_POST['tags']) == "" or ! isValidTag($_POST['tags'])){header("Location: edit_question.php?q=".$_GET['q']);exit();}
    $rawTagArr = explode(" ",$_POST['tags']);
    $tagArr = "";
    for($i = 0;$i < count($rawTagArr); $i++){
        if(str_replace(" ","",$rawTagArr[$i]) != ""){
            if(strlen($rawTagArr[$i]) > 50){header("Location: edit_question.php?q=".$_GET['q']);exit();}
            $tagArr.=$rawTagArr[$i]." ";
        }
    }
    $qry = "update askLantic__questions set titl=:ttl,ques=:qst,tags=:tgs where quesId=".$quesData['quesId'];
    $raw_data = $pdo->prepare($qry);
    $raw_data->execute(array(
        ':ttl' => htmlentities($_POST["ttle"]),
        ':qst' => $_POST["desc"],
        ':tgs' => htmlentities($_POST["tags"])
    ));
    header("Location: questions.php"."?q=".$_GET['q']);
}


?>
<!DOCTYPE html>
<html>
    <head>
        <title>AskLantic || Ask your stuff here</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link href='https://fonts.googleapis.com/css?family=Days One' rel='stylesheet'>
        <link rel="shortcut icon" type="image/png" href="images/favicon.png">
        <link rel="stylesheet" href="css/style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="js/index.js"></script>
    </head>
    <body onload="$('#ldScrn')[0].remove()">
        <div id='ldScrn'>
            <svg width="250" height="250" viewBox="0 0 604 603" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M302 603C468.514 603 603.5 468.014 603.5 301.5C603.5 134.986 468.514 0 302 0C135.486 0 0.5 134.986 0.5 301.5C0.5 468.014 135.486 603 302 603Z" fill="#3F3D56"/>
                <path opacity="0.05" d="M302 550.398C439.462 550.398 550.898 438.962 550.898 301.5C550.898 164.038 439.462 52.6021 302 52.6021C164.537 52.6021 53.1021 164.038 53.1021 301.5C53.1021 438.962 164.537 550.398 302 550.398Z" fill="black"/>
                <path opacity="0.05" d="M302 505.494C414.663 505.494 505.994 414.163 505.994 301.5C505.994 188.837 414.663 97.5064 302 97.5064C189.337 97.5064 98.0064 188.837 98.0064 301.5C98.0064 414.163 189.337 505.494 302 505.494Z" fill="black"/>
                <path opacity="0.05" d="M302 447.76C382.777 447.76 448.26 382.277 448.26 301.5C448.26 220.723 382.777 155.24 302 155.24C221.223 155.24 155.74 220.723 155.74 301.5C155.74 382.277 221.223 447.76 302 447.76Z" fill="black"/>
                <path d="M304.76 533.012C324.159 533.012 339.885 516.958 339.885 497.155C339.885 477.352 324.159 461.299 304.76 461.299C285.36 461.299 269.634 477.352 269.634 497.155C269.634 516.958 285.36 533.012 304.76 533.012Z" fill="#3895BF"/>
                <path d="M300.997 123.003C246.1 123.399 201.151 168.938 200.371 224.973C200.364 225.49 200.36 229.128 200.361 233.886C200.361 240.862 203.076 247.552 207.908 252.485C212.74 257.418 219.294 260.19 226.128 260.19C229.515 260.19 232.87 259.507 235.999 258.183C239.128 256.858 241.971 254.917 244.365 252.471C246.76 250.024 248.658 247.12 249.952 243.924C251.246 240.728 251.911 237.304 251.908 233.845C251.905 230.609 251.904 228.369 251.904 228.231C251.902 219.571 254.109 211.06 258.307 203.534C262.505 196.009 268.55 189.729 275.847 185.311C283.144 180.894 291.442 178.492 299.924 178.341C308.406 178.19 316.781 180.296 324.224 184.451C331.668 188.606 337.923 194.668 342.375 202.04C346.827 209.411 349.323 217.839 349.617 226.494C349.91 235.149 347.992 243.733 344.05 251.401C340.108 259.07 334.278 265.559 327.135 270.23L327.144 270.241C327.144 270.241 290.469 294.342 279.288 327.405L279.297 327.407C277.331 334.181 276.335 341.208 276.339 348.273C276.339 351.177 276.507 376.585 276.83 397.207C276.943 404.323 279.792 411.108 284.762 416.098C289.732 421.089 296.424 423.885 303.396 423.883C306.899 423.883 310.367 423.176 313.602 421.802C316.836 420.429 319.772 418.416 322.241 415.879C324.711 413.343 326.664 410.333 327.99 407.023C329.315 403.713 329.986 400.168 329.965 396.593C329.852 377.706 329.792 355.715 329.792 354.119C329.792 333.817 348.978 313.589 364.737 300.398C382.885 285.209 395.944 264.508 401.19 241.158C402.35 236.351 402.99 231.428 403.098 226.477C403.098 212.826 400.452 199.309 395.312 186.706C390.171 174.103 382.639 162.662 373.148 153.044C363.658 143.426 352.396 135.819 340.013 130.664C327.63 125.508 314.37 122.904 300.997 123.003Z" fill="#3895BF"/>
            </svg>
        </div>
        <div class="homeHead" style="height:60px;">
                <h1 onclick="location.href='index.php'" onmouseover="this.style.cursor='pointer'">AskLantic</h1>
                <?php
                if($userData != []){
                $profPic = $userData["prfpc"];
                if($profPic == ""){$profPic = "images/default.png";}
                else{$profPic = "profile_picture/".$profPic;}
                echo "
                <div class='menu' onmouseover='document.getElementsByClassName(\"menuOptions\")[0].style.display=\"block\"' onmouseout='document.getElementsByClassName(\"menuOptions\")[0].style.display=\"none\"'>
                    <button class='prof'>
                        <img src='".$profPic."' onerror='this.src=\"images/default.png\"'>
                    </button>
                    <div class='menuOptions'>
                        <button onclick='location.href=\"profile.php\"'>Profile</button><br>
                        <button onclick='location.href=\"achievements.php\"'>Achievements</button><br>
                        <button onclick='lgout()'>Logout</button><br>
                    </div>
                </div>";
            }
            ?>
        </div>
        <div id="err" style="position:fixed;color:green;border-color:green;background:rgba(120,255,120,0.5);"></div>
        <?php
        if($userData == [] or $askData['userId'] != $userData['userId'])
        {echo '
        <h1 style="color:red;">Permission Denied</h1>
        <svg width="200" height="400" viewBox="0 0 416 460" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path id="permProp" d="M9.13072 389.754H172.271C173.848 389.745 175.396 389.329 176.764 388.545C178.132 387.762 179.275 386.637 180.08 385.281C180.885 383.925 181.326 382.384 181.359 380.808C181.393 379.231 181.018 377.673 180.271 376.284L98.7407 224.804C97.9593 223.352 96.7993 222.138 95.3837 221.292C93.968 220.447 92.3498 220 90.7007 220C89.0517 220 87.4334 220.447 86.0178 221.292C84.6022 222.138 83.4421 223.352 82.6608 224.804L1.09074 376.284C0.342073 377.676 -0.0329574 379.238 0.00227177 380.818C0.037501 382.398 0.481771 383.941 1.29173 385.298C2.10169 386.655 3.24967 387.779 4.62358 388.56C5.99749 389.341 7.55039 389.752 9.13072 389.754V389.754ZM101.081 362.074H80.3207V341.324H101.081V362.074ZM101.081 327.484H80.3207V285.974H101.081V327.484Z" fill="#FF1313"/>
            <g id="permHand">
            <path id="Vector 3" d="M231.496 163.689L224.467 166.035C224.467 166.035 174.247 172.139 191.985 182.897C209.724 193.655 229.351 181.296 229.351 181.296L234.796 176.733L231.496 163.689Z" fill="#FBBEBE"/>
            <path id="Path 264" d="M328.486 117.064L328.803 117.545L289.003 143.766L221.839 165.213C220.949 165.499 220.185 166.085 219.678 166.871C219.171 167.657 218.952 168.594 219.058 169.523L220.523 182.143C220.588 182.702 220.769 183.24 221.054 183.725C221.34 184.209 221.723 184.629 222.18 184.957C222.637 185.284 223.158 185.513 223.708 185.628C224.259 185.742 224.827 185.741 225.377 185.623L288.589 172.074C291.649 171.422 294.542 170.148 297.089 168.332L341.799 136.517C344.253 134.768 345.923 132.126 346.449 129.159C346.975 126.191 346.315 123.136 344.612 120.65C342.908 118.165 340.297 116.447 337.34 115.867C334.382 115.286 331.316 115.89 328.799 117.548L328.486 117.064Z" fill="#D50606"/>
            </g>
            <g id="permBody">
            <g id="Group 1">
            <path id="Path 257" d="M404.009 447.536H390.829L384.561 396.699H404.013L404.009 447.536Z" fill="#FFB8B8"/>
            <path id="Path 258" d="M381.409 443.769H406.827V459.769H365.409C365.409 455.526 367.095 451.456 370.095 448.455C373.096 445.455 377.166 443.769 381.409 443.769Z" fill="#2F2E41"/>
            <path id="Path 259" d="M269.359 447.536H256.179L249.911 396.699H269.363L269.359 447.536Z" fill="#FFB8B8"/>
            <path id="Path 260" d="M246.765 443.769H272.183V459.769H230.761C230.761 455.526 232.447 451.456 235.447 448.455C238.448 445.455 242.518 443.769 246.761 443.769H246.765Z" fill="#2F2E41"/>
            <path id="Path 265" d="M391.064 433.11C390.052 433.11 389.062 432.816 388.215 432.263C387.368 431.71 386.7 430.921 386.293 429.995L325.872 280.695C325.731 280.371 325.494 280.098 325.193 279.913C324.893 279.728 324.542 279.639 324.19 279.659C323.837 279.679 323.499 279.806 323.221 280.024C322.943 280.242 322.738 280.539 322.634 280.877L273.339 426.227C273.131 426.903 272.787 427.53 272.327 428.069C271.868 428.607 271.304 429.046 270.668 429.358C270.033 429.67 269.341 429.849 268.634 429.884C267.927 429.919 267.221 429.808 266.558 429.56L250.028 423.36C249.131 423.027 248.344 422.451 247.754 421.697C247.164 420.943 246.795 420.04 246.688 419.089C239.251 354.307 304.101 190.789 304.757 189.143L304.939 188.688L364.055 201.765L364.178 201.899C387.763 227.629 407.149 389.911 410.796 422.182C410.932 423.348 410.667 424.525 410.044 425.519C409.422 426.514 408.479 427.267 407.371 427.654L392.78 432.814C392.229 433.009 391.649 433.109 391.064 433.109V433.11Z" fill="#2F2E41"/>
            </g>
            <g id="Group 5">
            <path id="Path 266" d="M340.13 207.033C325.807 207.033 309.839 204.177 304.924 192.391L304.811 192.12L304.964 191.869C308.844 185.503 313.971 174.645 311.215 172.606C305.786 168.592 303.151 161.988 303.385 152.978C303.893 133.419 317.22 116.053 336.548 109.766C341.943 108.039 347.433 106.626 352.991 105.532C357.043 104.714 361.226 104.805 365.239 105.796C369.252 106.787 372.995 108.654 376.201 111.264C379.447 113.891 382.07 117.204 383.883 120.966C385.696 124.727 386.654 128.843 386.687 133.019C386.887 153.919 383.672 183.034 367.187 203.019C366.414 203.946 365.339 204.571 364.151 204.784C356.223 206.219 348.187 206.971 340.13 207.033V207.033Z" fill="#D50606"/>
            <g id="Group 3">
            <path id="Vector 4" d="M367.135 205.077L360.752 208.843C360.752 208.843 323.198 242.74 326.716 222.295C330.235 201.849 352.439 195.145 352.439 195.145L359.454 194.029L367.135 205.077Z" fill="#FBBEBE"/>
            <path id="Path 268" d="M365.446 206.458C364.249 206.458 363.089 206.043 362.163 205.284L354.895 199.345C354.289 198.85 353.803 198.224 353.473 197.515C353.144 196.805 352.979 196.03 352.991 195.248C353.003 194.465 353.192 193.696 353.543 192.997C353.895 192.298 354.4 191.687 355.021 191.211L385.505 167.831C385.866 167.553 386.104 167.143 386.165 166.691C386.226 166.239 386.106 165.781 385.832 165.416L367.017 140.541C364.831 137.661 363.734 134.1 363.922 130.489C364.109 126.877 365.568 123.449 368.04 120.81C370.644 117.998 374.209 116.268 378.029 115.962C381.849 115.657 385.645 116.799 388.662 119.161L388.781 119.287L408.428 147.42C410.553 149.086 412.263 151.22 413.427 153.656C414.59 156.093 415.175 158.765 415.134 161.464C415.094 164.164 414.431 166.818 413.195 169.218C411.96 171.619 410.186 173.701 408.013 175.303L368.532 205.437C367.638 206.097 366.556 206.454 365.444 206.454L365.446 206.458Z" fill="#D50606"/>
            </g>
            </g>
            </g>
            <g id="permHead">
            <path id="Path 261" d="M313.381 70.445V64.68C313.381 54.8193 317.298 45.3624 324.271 38.3898C331.243 31.4172 340.7 27.5 350.561 27.5V27.5C360.422 27.5 369.879 31.4172 376.851 38.3898C383.824 45.3624 387.741 54.8193 387.741 64.68V70.444C387.741 77.5518 384.917 84.3685 379.891 89.3945C374.866 94.4204 368.049 97.244 360.941 97.244H340.185C333.077 97.244 326.261 94.4204 321.235 89.3945C316.209 84.3685 313.385 77.5518 313.385 70.444L313.381 70.445Z" fill="#2F2E41"/>
            <path id="Ellipse 36" d="M350.562 99.233C366.201 99.233 378.878 86.5555 378.878 70.917C378.878 55.2785 366.201 42.601 350.562 42.601C334.924 42.601 322.246 55.2785 322.246 70.917C322.246 86.5555 334.924 99.233 350.562 99.233Z" fill="#FFB8B8"/>
            <path id="Path 269" d="M325.48 62.951V48.902L350.562 37.946L374.478 48.898V62.947C374.478 63.2498 374.418 63.5497 374.302 63.8295C374.187 64.1092 374.017 64.3635 373.803 64.5776C373.588 64.7917 373.334 64.9616 373.054 65.0775C372.775 65.1934 372.475 65.253 372.172 65.253H327.786C327.483 65.253 327.183 65.1934 326.904 65.0775C326.624 64.9616 326.37 64.7917 326.155 64.5776C325.941 64.3635 325.771 64.1092 325.656 63.8295C325.54 63.5497 325.48 63.2498 325.48 62.947V62.951Z" fill="#2F2E41"/>
            <path id="Ellipse 30" d="M372.019 41.735C380.702 41.735 387.741 34.696 387.741 26.013C387.741 17.33 380.702 10.291 372.019 10.291C363.336 10.291 356.297 17.33 356.297 26.013C356.297 34.696 363.336 41.735 372.019 41.735Z" fill="#2F2E41"/>
            <path id="Path 185" d="M357.507 17.579C357.506 15.253 358.021 12.9558 359.015 10.853C360.01 8.75032 361.459 6.89455 363.257 5.41964C365.056 3.94472 367.159 2.88744 369.416 2.3241C371.673 1.76076 374.026 1.70539 376.307 2.16201C374.294 1.21353 372.103 0.703348 369.878 0.665211C367.653 0.627075 365.445 1.06186 363.401 1.94078C361.357 2.81971 359.523 4.12275 358.02 5.76366C356.517 7.40458 355.38 9.34596 354.683 11.4593C353.987 13.5727 353.747 15.8099 353.98 18.0228C354.213 20.2358 354.913 22.374 356.034 24.2961C357.155 26.2182 358.672 27.8802 360.484 29.1723C362.295 30.4643 364.361 31.3569 366.543 31.791C363.844 30.5236 361.561 28.5141 359.962 25.9974C358.362 23.4808 357.512 20.5609 357.511 17.579H357.507Z" fill="#2F2E41"/>
            </g>
        </svg></body>
        </html>';exit();}
        ?>
        <div id="err" style="position:fixed;"></div>
        <div class="askQues">
            <form method="post" autocomplete="off">
                <label for="ttl">Title</label> <span class="wrdCnt">0/150</span><br>
                <input placeholder="Keep It Simple and Specific" spellcheck="true" title="be specific and short" id="ttl" name="ttle" value="<?= $quesData['titl'] ?>"/><span class="alrt">&#x26A0;</span><br>
                <label for="bdy">Description</label> <span class="wrdCnt">0/5000</span>
                <div class="btns">
                    <button type="button" onclick="insrtInBdy('[B] insert text here [!]')"><b>B</b></button>
                    <button type="button" onclick="insrtInBdy('[I] insert text here [!]')"><i>I</i></button>
                    <button type="button" onclick="insrtInBdy('[U] insert text here [!]')"><u>U</u></button>
                    <button type="button" onclick="insrtInBdy('[C] insert text here [!]')">&lt;Code&gt;</button>
                    <button type="button" onclick="insrtInBdy('[>] insert text here [!]')">Quote</button>
                </div>
                <br>
                <textarea id="bdy" placeholder="Try to be as specific and polite as you can" rows="10" name="desc"><?= $quesData['ques'] ?></textarea><span class="alrt">&#x26A0;</span><br>
                <label for="prw">Preview</label><br>
                <div id="prw"></div><hr>
                <label for="tgs">Tags</label><span class="wrdCnt">0/5</span><br>
                <input id="tgs" name="tags" placeholder="Seperate tags with spaces" value="<?= $quesData['tags'] ?>"><span class="alrt">&#x26A0;</span>
                <div id="tags"></div>
                <hr>
                <input id="sbm" value="Edit Question" name="subm" type="submit" onclick="return submQues();">
                <input value="Back to question" type="button" onclick="if(confirm('Are you sure to leave the question like this? It won\' be saved')){location.href='questions.php?q=<?=$_GET['q']?>'}">
            </form>
        </div>

        <svg width="200px" height="400px" viewBox="0 0 369 625" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="editBody">
            <g id="editBoard">
            <path id="Vector" d="M368.066 120.895L71.7814 0L1.66893e-06 175.919L296.284 296.814L368.066 120.895Z" fill="#3F3D56"/>
            <g id="Group 1">
            <path id="Vector_2" d="M52.4167 236.956L31.9072 205.508C31.9072 205.508 36.979 172.518 30.1425 178.671C23.306 184.824 21.1425 209.671 21.1425 209.671L44.8965 245.843L52.4167 236.956Z" fill="#FFB9B9"/>
            <path id="Vector_3" d="M103.691 301.219V294.382C103.691 294.382 85.9157 282.76 86.5993 280.709C87.283 278.659 85.232 277.291 85.232 277.291C85.232 277.291 83.181 274.557 83.181 273.873C83.181 273.189 80.4464 272.506 80.4464 272.506L63.3552 252.68C63.3552 252.68 53.784 233.537 51.7331 234.221C49.6821 234.905 38.7437 239.007 40.111 241.741C41.4783 244.476 79.7628 303.27 79.7628 303.27C79.7628 303.27 81.8138 316.259 85.232 316.259C88.6502 316.259 103.691 301.219 103.691 301.219Z" fill="#3F3D56"/>
            </g>
            <g id="Group 2">
            <path id="Vector_4" d="M238.37 294.382L256.828 293.015C256.828 293.015 278.705 269.771 280.073 277.291C281.44 284.811 262.298 301.219 262.298 301.219L237.003 303.953L238.37 294.382Z" fill="#FFB9B9"/>
            <path id="Vector_5" d="M149.495 309.423C149.495 309.423 164.536 308.739 165.219 309.423C165.903 310.106 175.474 309.423 175.474 309.423C175.474 309.423 201.453 303.27 203.504 301.219C205.555 299.168 239.737 290.28 241.104 294.382C242.472 298.484 245.89 306.688 242.472 308.055C239.054 309.423 146.761 332.667 146.761 332.667L149.495 309.423Z" fill="#3F3D56"/>
            </g>
            </g>
            <g id="editBody_2">
            <path id="Vector_6" d="M128.006 285C128.006 285 118.435 306.193 115.701 306.877C112.966 307.561 138.261 319.866 138.261 319.866C138.261 319.866 143.047 293.887 145.098 292.52C147.148 291.153 128.006 285 128.006 285Z" fill="#FFB9B9"/>
            <path id="Vector_7" opacity="0.1" d="M128.006 285C128.006 285 118.435 306.193 115.701 306.877C112.966 307.561 138.261 319.866 138.261 319.866C138.261 319.866 143.047 293.887 145.098 292.52C147.148 291.153 128.006 285 128.006 285Z" fill="black"/>
            <path id="Vector_8" d="M71.2636 458.647L53.4886 508.554L72.6306 516.074L105.446 451.127L71.2636 458.647Z" fill="#FFB9B9"/>
            <path id="Vector_9" d="M133.475 460.015C133.475 460.015 169.025 509.921 171.076 510.605C173.127 511.289 187.484 498.983 187.484 498.983C187.484 498.983 169.709 455.913 164.24 453.862C158.771 451.811 133.475 460.015 133.475 460.015Z" fill="#FFB9B9"/>
            <path id="Vector_10" d="M50.7537 499.667L22.724 572.817C22.724 572.817 24.775 576.919 22.724 577.603C20.673 578.286 15.8875 589.225 15.8875 589.909C15.8875 590.592 11.1019 591.276 11.1019 593.327C11.1019 595.378 7 611.785 7 611.785C7 611.785 14.5202 628.193 19.3057 623.407C24.0913 618.622 26.1422 609.051 26.1422 609.051L32.9787 591.276C32.9787 591.276 32.2951 581.705 37.0807 580.337C41.8662 578.97 44.6008 561.879 44.6008 561.879C44.6008 561.879 52.121 554.359 53.4883 552.308C54.8556 550.257 78.7834 514.023 76.7325 513.34C74.6815 512.656 50.7537 499.667 50.7537 499.667Z" fill="#2F2E41"/>
            <path id="Vector_11" d="M166.974 509.238L187.484 495.565C187.484 495.565 223.034 560.512 223.034 561.879C223.034 563.246 221.667 567.348 223.034 568.715C224.401 570.083 236.023 591.959 243.543 594.01C251.064 596.061 252.431 604.265 246.278 605.633C240.125 607 231.921 610.418 229.87 605.633C228.671 602.817 227.301 600.077 225.768 597.429C225.768 597.429 218.932 599.48 218.248 598.112C217.459 596.098 216.775 594.044 216.197 591.959C216.197 591.959 210.728 582.388 210.728 578.97C210.708 578 210.359 577.066 209.738 576.32C209.116 575.575 208.26 575.063 207.31 574.868C207.31 574.868 199.79 557.093 195.004 554.359C190.219 551.624 186.117 537.951 186.117 537.951L166.974 509.238Z" fill="#2F2E41"/>
            <path id="Vector_12" d="M83.5689 401.221C83.5689 401.221 64.4267 463.433 68.5286 463.433C72.6305 463.433 167.658 466.168 171.076 460.698C174.495 455.229 149.883 416.261 148.516 415.577C147.149 414.894 83.5689 401.221 83.5689 401.221Z" fill="#2F2E41"/>
            <path id="Vector_13" d="M122.195 295.597C122.195 295.597 116.042 300.382 114.675 301.066C113.308 301.749 105.104 294.913 103.737 294.913C102.369 294.913 84.5945 315.422 84.5945 315.422C84.5945 315.422 87.8978 319.227 84.5945 338.667C83.3556 345.957 80.8977 377.125 80.8977 381.227C80.8977 385.329 67.5032 395.41 79.8089 404.297C92.1146 413.185 150.909 422.756 151.592 417.287C152.276 411.817 144.756 397.461 148.174 390.624C151.592 383.788 151.592 358.493 151.592 358.493L155.694 331.83L159.112 310.637C159.112 310.637 143.047 306.193 141.679 306.193C140.312 306.193 134.159 315.764 122.195 295.597Z" fill="#3F3D56"/>
            </g>
            </g>
            <g id="editHead">
            <path id="Vector_14" d="M136.807 296.983C153.036 296.983 166.192 283.827 166.192 267.599C166.192 251.37 153.036 238.214 136.807 238.214C120.578 238.214 107.422 251.37 107.422 267.599C107.422 283.827 120.578 296.983 136.807 296.983Z" fill="#2F2E41"/>
            <path id="Vector_15" d="M137.136 298.168C148.086 298.168 156.962 289.292 156.962 278.342C156.962 267.393 148.086 258.516 137.136 258.516C126.187 258.516 117.31 267.393 117.31 278.342C117.31 289.292 126.187 298.168 137.136 298.168Z" fill="#FFB9B9"/>
            <path id="Vector_16" d="M126.528 248.831C133.243 248.831 138.687 243.387 138.687 236.671C138.687 229.956 133.243 224.512 126.528 224.512C119.812 224.512 114.368 229.956 114.368 236.671C114.368 243.387 119.812 248.831 126.528 248.831Z" fill="#2F2E41"/>
            <path id="Vector_17" d="M110.315 230.085C110.316 227.08 111.429 224.181 113.44 221.948C115.452 219.714 118.219 218.305 121.208 217.992C120.787 217.948 120.364 217.926 119.941 217.926C116.717 217.926 113.624 219.207 111.344 221.487C109.063 223.768 107.782 226.86 107.782 230.085C107.782 233.31 109.063 236.403 111.344 238.683C113.624 240.963 116.717 242.244 119.941 242.244C120.364 242.244 120.787 242.222 121.208 242.179C118.219 241.865 115.452 240.456 113.44 238.223C111.429 235.99 110.316 233.091 110.315 230.085Z" fill="#2F2E41"/>
            <path id="Vector_18" d="M140.225 273.527C151.417 273.527 160.49 268.084 160.49 261.368C160.49 254.653 151.417 249.209 140.225 249.209C129.033 249.209 119.96 254.653 119.96 261.368C119.96 268.084 129.033 273.527 140.225 273.527Z" fill="#2F2E41"/>
            </g>
            <path id="editPol2" d="M141.259 51.1534C143.384 50.8736 145.497 51.7489 146.802 53.4495L188.242 107.454C189.547 109.155 189.845 111.423 189.025 113.403L162.975 176.293C162.155 178.274 160.34 179.666 158.215 179.946L90.7254 188.831C88.6002 189.111 86.4871 188.236 85.1822 186.535L43.7427 132.53C42.4377 130.829 42.1392 128.562 42.9595 126.581L69.0095 63.6911C69.8298 61.7107 71.6443 60.3184 73.7696 60.0386L141.259 51.1534Z" fill="white"/>
            <path id="editPol1" d="M281.809 108.863C283.632 108.761 285.402 109.494 286.619 110.856L326.136 155.075C327.352 156.437 327.883 158.278 327.577 160.078L317.643 218.544C317.337 220.344 316.228 221.907 314.63 222.79L262.726 251.477C261.128 252.36 259.215 252.467 257.528 251.768L202.739 229.074C201.052 228.375 199.775 226.946 199.269 225.192L182.852 168.206C182.346 166.451 182.667 164.562 183.724 163.073L218.041 114.707C219.098 113.218 220.775 112.291 222.598 112.188L281.809 108.863Z" fill="white"/>
        </svg>
        <script>
            var totTags;
            setInterval(() => {document.getElementsByClassName("wrdCnt")[0].innerHTML = ttl.value.length+"/"+"150";
            if(ttl.value.length > 150){document.getElementsByClassName("wrdCnt")[0].style.color="red"}
            else{document.getElementsByClassName("wrdCnt")[0].style.color="rgb(50,100,150)"}
            document.getElementsByClassName("wrdCnt")[1].innerHTML = bdy.value.replaceAll(" ","").replaceAll("\n","").length+"/"+"5000";
            if(bdy.value.length > 10000){document.getElementsByClassName("wrdCnt")[1].style.color="red"}
            else{document.getElementsByClassName("wrdCnt")[1].style.color="rgb(50,100,150)";prw.innerHTML=fltrDesc(bdy.value,true);}
            
            if(tgs.value.split(" ").length > 0){
                var tot = 0;
                tags.innerHTML = "";
                for(t of tgs.value.split(" ")){
                    if(t.replaceAll(" ","").length == 0){continue;}
                    tags.innerHTML += "<p class='tag'>"+htmlEntities(t)+"</p>";
                    tot += 1;
                }
                if(tgs.value.length == 0) tot=0;
                document.getElementsByClassName("wrdCnt")[2].innerHTML = tot+"/5";
                document.getElementsByClassName("wrdCnt")[2].style.color = "rgb(50,120,150)";
                if( tot > 5) document.getElementsByClassName("wrdCnt")[2].style.color = "red";

                totTags = tot;
            }
            },100)

            </script>
    <script>timeSpent();</script>
    </body>
</html>
